<!-- Call Routing IVR BASED View Form -->
<div class="col-sm-12">
    <div class="panel panel-default">
        <div class="panel-heading"><h3>IVR</h3></div>
        <div class="panel-body">

            <div class="ivr-based">
                <div class="contact-info col-sm-11 col-sm-offset-1">
                    <div ng-show="success" class="alert alert-success">{{success}}</div>
                    <div ng-show="error" class="alert text-danger">{{error}}</div>
                    <form class="vertical-form" role="form" name="ivr_form" ng-submit="submitForm(ivr)" novalidate">
                        <div class="col-sm-11" style="padding: 0;">
                            <p>If you select an Initial Prompt, your callers will hear this prompt before the first IVR condition is fired. For example, a good Initial Prompt might be "Thanks for calling. All calls are recorded for quality purposes. For sales, press 1. For support, press 2. For billing, press 3, or hold to speak to the operator.</p>
                        </div>
                        <div class="input-group form-group col-md-4 pull-left mainIvr">
                            <span class="input-group-addon borderRight">Initial Prompt</span>


                            <div class="col-xs-12 paddingLR5p margin7p borderRight">
                                <select class="ivr_select" name="initial_prompt" ng-model="ivr.inital_prompt_id">
                                    <option value="">Select</option>
                                    <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.inital_prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="mm">
                            <div class="input-group form-group col-md-10 pull-left mainIvr">
                                <span class="input-group-addon borderRight">When</span>


                                <div class="col-xs-3 paddingLR5p margin7p borderRight">
                                    <select class="ivr_select" name="ivr_option" ng-model="ivr.pressed_operation[0].pressed_option">
                                        <option value="">Select</option>
                                        <option value="nothing">If nothing is pressed</option>
                                        <option value="1">1 is pressed</option>
                                        <option value="2">2 is pressed</option>
                                        <option value="3">3 is pressed</option>
                                        <option value="4">4 is pressed</option>
                                        <option value="5">5 is pressed</option>
                                        <option value="6">6 is pressed</option>
                                        <option value="7">7 is pressed</option>
                                        <option value="8">8 is pressed</option>
                                        <option value="9">9 is pressed</option>
                                        <option value="#"># is pressed</option>
                                        <option value="*">* is pressed</option>
                                    </select>
                                </div>
                                <div class="col-xs-5 paddingLR5p margin7p borderRight">
                                    <select class="ivr_select" name="ivr_method" ng-model="ivr.pressed_operation[0].pressed_action" ng-change="resetInitialCount(ivr.pressed_operation[0])"> 
                                        <option value="">Select</option>
                                        <option ng-repeat="option in optionarr" ng-selected="option.value==ivr.pressed_operation[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                    </select>
                                </div>
                                <div class="col-xs-4 paddingLR5p margin7p">
                                    <span ng-if="ivr.pressed_operation[0].pressed_action == 'dial' || ivr.pressed_operation[0].pressed_action == 'reps'">
                                        <input type="text" ng-model="ivr.pressed_operation[0].dial_schema[0].dial_to" class="margin2p ivr_select backWhite" id="phonenumber" name="phonenumber" placeholder="Enter Phone Number" phone-input>
                                    </span>

                                    <span ng-if="ivr.pressed_operation[0].pressed_action == 'prompt'">
                                        <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[0].prompt_schema[0].prompt_id">
                                            <option value="">Select Prompt</option>
                                            <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                        </select>
                                    </span>
                                    <span ng-if="ivr.pressed_operation[0].pressed_action == 'queue'">
                                        <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].queue_id">
                                            <option value="">Select Queue</option>
                                            <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                        </select>
                                    </span>
                                    <span ng-if="ivr.pressed_operation[0].pressed_action == 'extension'">
                                        <select name="ivr_pa" class="ivr_select" ng-model="ivr.pressed_operation[0].ring_schema[0].phone_agent_id">
                                            <option value="">Select Phone Agent</option>
                                            <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                        </select>
                                    </span>
                                </div>

                            </div>
                            <div class="col-sm-1 dial-plus paddingLR5p">
                                <button type="button" ng-click="incrementMainCount()" class="btn btn-primary plus-btn greenBack"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                            </div>
                            <div class="col-sm-1 dial-plus paddingLR5p">
                                <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                            </div>
                            <div>

                                <div class="form-group" ng-if="ivr.pressed_operation[0].pressed_action == 'dial' || ivr.pressed_operation[0].pressed_action == 'reps'">

                                    <div class="col-sm-9 backgrndGrey">
                                        <div class="col-sm-8 paddingLR5p">
                                            <input type="checkbox" name="ivr_noanswer" ng-model="ivr.pressed_operation[0].dial_schema[0].is_next_dial" class="regular-checkbox solid-blue" id='ivr_noanswer'><label for="ivr_noanswer"></label>

                                            <label for="ivr_noanswer" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" ng-model="ivr.pressed_operation[0].dial_schema[0].wait_time" name="ivr_seconds" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                        </div>
                                        <div class="col-sm-4 paddingLR5p"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[0].dial_schema[1].dial_to" style="display:inline;" phone-input>
                                        </div>
                                    </div>
                                    <div class="col-sm-1 dial-plus paddingLR5p">
                                        <button type="button" ng-click="incrementDialCount()" class="btn btn-primary plus-btn greenBack"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                    </div>
                                    <div class="col-sm-1 dial-plus paddingLR5p">
                                        <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                    </div>


                                    <div ng-repeat="n in []| range:dialcount" ng-init="show[$index] = true;">
                                        <div ng-if="show[$index]">
                                            <div class="col-sm-9 backgrndGrey">
                                                <div class="col-sm-8 paddingLR5p" >
                                                    <input type="checkbox" name="ivr_noanswer_{{$index}}" ng-model="ivr.pressed_operation[0].dial_schema[$index + 1].is_next_dial" class="regular-checkbox solid-blue" id='ivr_noanswer_{{$index}}'><label for="ivr_noanswer_{{$index}}"></label>

                                                    <label for="ivr_noanswer_{{$index}}" class="greyColor">If no answer after </label> 
                                                    <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-pattern="/^[0-9+-]*$/" ng-model="ivr.pressed_operation[0].dial_schema[$index + 1].wait_time" name="ivr_seconds_{{$index}}" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                </div>
                                                <div class="col-sm-4 paddingLR5p">
                                                    <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" ng-model="ivr.pressed_operation[0].dial_schema[$index + 2].dial_to" placeholder="Enter Phone Number" phone-input>
                                                </div>
                                            </div>
                                            <div class="col-sm-1 dial-plus paddingLR5p">
                                                <button type="button" ng-click="incrementDialCount()" class="btn btn-primary plus-btn greenBack"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                            </div>
                                            <div class="col-sm-1 dial-plus paddingLR5p">
                                                <button type="button"  ng-click="show[$index] = false;
                                                        removeItem(ivr.pressed_operation[0].dial_schema, $index + 2)" class="btn btn-primary plus-btn redBack"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="ivr.pressed_operation[0].pressed_action == 'prompt'">
                                    <div class="paddingLR5p col-sm-8">
                                        <div class="input-group form-group col-md-12 backgrndGrey queue">
                                            <span class="input-group-addon borderRight" style="background:none;"> Then </span>
                                            <div class="paddingLR5p col-xs-6 margin7p">
                                                <select class="ivr_select" name="ivr_queueOptions" ng-model="ivr.pressed_operation[0].prompt_schema[0].pressed_action" ng-change="resetInitialCount(ivr.pressed_operation[0].prompt_schema[0])">
                                                    <option value="">Select</option>
                                                    <option ng-repeat="option in optionarr" ng-selected="option.value == ivr.pressed_operation[0].prompt_schema[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                </select>
                                            </div>
                                            <div class="col-xs-6 paddingLR5p margin7p">
                                                <span ng-if="ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'dial' || ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'reps'">
                                                    <input type="text" class="margin2p ivr_select backWhite" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[0].dial_to" name="phonenumber" placeholder="Enter Phone Number" phone-input>
                                                </span>

                                                <span ng-if="ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'prompt'">
                                                    <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[0].prompt_schema[0].prompt_schema[0].prompt_id">
                                                        <option value="">Select Prompt</option>
                                                        <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[0].prompt_schema[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                                    </select>
                                                </span>
                                                <span ng-if="ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'queue'">
                                                    <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[0].prompt_schema[0].sendToQueue_schema[0].queue_id">
                                                        <option value="">Select Queue</option>
                                                        <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[0].prompt_schema[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                                    </select>
                                                </span>
                                                <span ng-if="ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'extension'">
                                                    <select name="ivr_pa" class="ivr_select" ng-model="ivr.pressed_operation[0].prompt_schema[0].ring_schema[0].phone_agent_id">
                                                        <option value="">Select Phone Agent</option>
                                                        <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[0].prompt_schema[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                                    </select>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'dial' || ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'reps'">
                                        <div class="paddingLR5p col-sm-9 backgrndGrey">
                                            <div class="col-sm-7">
                                                <input type="checkbox" name="ivr_noanswer" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[0].is_next_dial" class="regular-checkbox solid-blue" id='ivr_noanswer'><label for="ivr_noanswer"></label>

                                                <label for="ivr_noanswer" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" name="ivr_seconds" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[0].wait_time" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                            </div>
                                            <div class="col-sm-5"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[1].dial_to" phone-input>
                                            </div>
                                        </div>
                                        <div class="col-sm-1 dial-plus">
                                            <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementPromptDialCount()"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                        </div>
                                        <div class="col-sm-1 dial-plus">
                                            <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                        </div>


                                        <div ng-repeat="n in []| range:promptdialcount">
                                            <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                <div class="paddingLR5p col-sm-9 backgrndGrey">
                                                    <div class="col-sm-7" >
                                                        <input type="checkbox" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[$index + 1].is_next_dial" name="ivr_noanswer_{{$index}}" class="regular-checkbox solid-blue" id='ivr_noanswer_{{$index}}'><label for="ivr_noanswer_{{$index}}"></label>

                                                        <label for="ivr_noanswer_{{$index}}" class="greyColor">If no answer after </label> 
                                                        <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[$index + 1].wait_time" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                    </div>
                                                    <div class="col-sm-5">
                                                        <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[0].prompt_schema[0].dial_schema[$index + 2].dial_to" phone-input>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 dial-plus">
                                                    <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementPromptDialCount()"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                </div>
                                                <div class="col-sm-1 dial-plus">
                                                    <button type="button" class="btn btn-primary plus-btn redBack" ng-click="show[$index] = false;
                                                            removeItem(ivr.pressed_operation[0].prompt_schema[0].dial_schema, $index + 2)"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--                                <div class="form-group" ng-if="ivr.prompt_option == 'queue'">
                                                                        <div class="col-sm-offset-1 col-sm-9 backgrndGrey">
                                                                            <select class="ivr_select" name="ivr_queue" ng-model="ivr.queue_queue">
                                                                                <option value="">Select Queue</option>
                                                                                <option value="1">Queue 1</option>
                                                                                <option value="2">Queue 2</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>-->
                                    <div class="form-group" ng-if="ivr.pressed_operation[0].prompt_schema[0].pressed_action == 'extension'">
                                        <!--                                    <div class="col-sm-9">
                                                                                <input type="checkbox" name="ivr_noanswerExt" ng-model="ivr.ext_checkbox" class="regular-checkbox solid-blue" id='ivr_noanswerExt'><label for="ivr_noanswerExt"></label>
                                                                                <label for="ivr_noanswerExt">If no answer after </label><input type="text" class="dialInputSec" name="ivr_seconds" ng-model="ivr.ext_seconds" placeholder="Seconds"> seconds.
                                                                                <div ng-show="ivr.ext_checkbox">
                                                                                    <div class="col-sm-10" >
                                                                                        <input type="radio" value="message" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_allow'><label for="ivr_message_allow"></label>
                                                                                        <label for="ivr_message">Allow the user to leave a message for the Phone Agent</label>
                                                                                    </div>
                                                                                    <div class="col-sm-10" >
                                                                                        <input type="radio" value="dropdown" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_dropdown'><label for="ivr_message_dropdown"></label>
                                                                                        <label for="ivr_message">Select From Dropdown</label>
                                                                                    </div>
                                                                                    <div class="col-sm-5 col-sm-offset-1 backgrndGrey" ng-show="ivr.ext_radio == 'dropdown'">
                                                                                        <select class="ivr_select" name="ivr_promptOptions" ng-model="ivr.ext_option">
                                                                                            <option value="">Select Extension Option</option>
                                                                                            <option ng-repeat="option in optionarr" ng-show="option.value != ivr.prompt_option" value="{{option.value}}">{{option.display}}</option>
                                                                                        </select>
                                                                                    </div>
                                        
                                                                                </div>
                                                                            </div>-->
                                    </div>

                                </div>
                                <div class="form-group" ng-if="ivr.pressed_operation[0].pressed_action == 'queue'">
                                    <div class="paddingLR5p col-sm-10">
                                        <div class="input-group form-group col-md-12 backgrndGrey queue">
                                            <span class="input-group-addon" style="background:none;">
                                                <input type="checkbox" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].is_next_action" name="ivr_queue" class="regular-checkbox solid-blue" id='ivr_queue'><label for="ivr_queue"></label>
                                                If no agents are available or if no answer after <input type="text" class="ivr_select backWhite dialInputSec" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].wait_time" name="ivr_seconds" placeholder="Seconds"> seconds, then, </span>
                                            <div class="col-xs-12 margin7p">
                                                <select class="ivr_select" name="ivr_queueOptions" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action" ng-change="resetInitialCount(ivr.pressed_operation[0].sendToQueue_schema[0])">
                                                    <option value="">Select</option>
                                                    <option ng-repeat="option in optionarr" ng-selected="option.value==ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action == 'dial' || ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action == 'reps'">
                                        <div class="col-sm-5 backgrndGrey">
                                            <input type="text" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[0].dial_to" class="ivr_select backWhite" name="phonenumber" placeholder="Enter Phone Number" phone-input>
                                        </div>
                                        <div class="col-sm-9 backgrndGrey">
                                            <div class="col-sm-7">
                                                <input type="checkbox" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[0].is_next_dial" name="ivr_noanswer" class="regular-checkbox solid-blue" id='ivr_noanswer'><label for="ivr_noanswer"></label>

                                                <label for="ivr_noanswer" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" name="ivr_seconds" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[0].wait_time" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                            </div>
                                            <div class="col-sm-5"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[1].dial_to" phone-input>
                                            </div>
                                        </div>
                                        <div class="col-sm-1 dial-plus">
                                            <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementQueueDialCount()"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                        </div>
                                        <div class="col-sm-1 dial-plus">
                                            <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                        </div>


                                        <div ng-repeat="n in []| range:queuedialcount">
                                            <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                <div class="col-sm-9 backgrndGrey">
                                                    <div class="col-sm-8" >
                                                        <input type="checkbox" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[$index + 1].is_next_dial" name="ivr_noanswer_{{$index}}" class="regular-checkbox solid-blue" id='ivr_noanswer_{{$index}}'><label for="ivr_noanswer_{{$index}}"></label>

                                                        <label for="ivr_noanswer_{{$index}}" class="greyColor">If no answer after </label> 
                                                        <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[$index + 1].wait_time" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema[$index + 2].dial_to" phone-input>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 dial-plus">
                                                    <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementQueueDialCount()"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                </div>
                                                <div class="col-sm-1 dial-plus">
                                                    <button type="button" class="btn btn-primary plus-btn redBack" ng-click="show[$index] = false;
                                                            removeItem(ivr.pressed_operation[0].sendToQueue_schema[0].dial_schema, $index + 2)"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action == 'prompt'">
                                        <div class="col-sm-5 backgrndGrey">
                                            <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].prompt_schema[0].prompt_id">
                                                <option value="">Select Prompt</option>
                                                <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[0].sendToQueue_schema[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action == 'queue'">
                                        <div class="col-sm-5 backgrndGrey" >
                                            <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].sendToQueue_schema[0].queue_id">
                                                <option value="">Select Queue</option>
                                                <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[0].sendToQueue_schema[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[0].sendToQueue_schema[0].pressed_action == 'extension'">
                                        <div class="col-sm-5 backgrndGrey">
                                            <select name="ivr_pa" class="ivr_select" ng-model="ivr.pressed_operation[0].sendToQueue_schema[0].ring_schema[0].phone_agent_id">
                                                <option value="">Select Phone Agent</option>
                                                <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[0].sendToQueue_schema[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                            </select>
                                        </div>
                                        <!--                                    <div class="col-sm-9">
                                                                                <input type="checkbox" name="ivr_noanswerExt" ng-model="ivr.ext_checkbox" class="regular-checkbox solid-blue" id='ivr_noanswerExt'><label for="ivr_noanswerExt"></label>
                                                                                <label for="ivr_noanswerExt">If no answer after </label><input type="text" class="dialInputSec" name="ivr_seconds" ng-model="ivr.ext_seconds" placeholder="Seconds"> seconds.
                                                                                <div ng-show="ivr.ext_checkbox">
                                                                                    <div class="col-sm-10" >
                                                                                        <input type="radio" value="message" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_allow'><label for="ivr_message_allow"></label>
                                                                                        <label for="ivr_message">Allow the user to leave a message for the Phone Agent</label>
                                                                                    </div>
                                                                                    <div class="col-sm-10" >
                                                                                        <input type="radio" value="dropdown" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_dropdown'><label for="ivr_message_dropdown"></label>
                                                                                        <label for="ivr_message">Select From Dropdown</label>
                                                                                    </div>
                                                                                    <div class="col-sm-5 col-sm-offset-1 backgrndGrey" ng-show="ivr.ext_radio == 'dropdown'">
                                                                                        <select class="ivr_select" name="ivr_promptOptions" ng-model="ivr.ext_option">
                                                                                            <option value="">Select Prompt Option</option>
                                                                                            <option ng-repeat="option in optionarr" ng-show="option.value != ivr.pressed_operation[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                                                        </select>
                                                                                    </div>
                                        
                                                                                </div>
                                                                            </div>-->
                                    </div>
                                </div>

                                <div class="form-group" ng-if="ivr.pressed_operation[0].pressed_action == 'extension'">
                                    <div class="col-sm-10">
                                        <input type="checkbox" name="ivr_noanswerExt" ng-model="ivr.pressed_operation[0].ring_schema[0].is_next_action" class="regular-checkbox solid-blue" id='ivr_noanswerExt'><label for="ivr_noanswerExt"></label>
                                        <label for="ivr_noanswerExt">If no answer after </label><input type="text" class="dialInputSec" ng-model="ivr.pressed_operation[0].ring_schema[0].wait_time" name="ivr_seconds" placeholder="Seconds"> seconds.
                                        <div ng-show="ivr.pressed_operation[0].ring_schema[0].is_next_action">
                                            <div class="col-sm-10" >
                                                <input type="radio" value="true" name="ivr_message" ng-model="ivr.pressed_operation[0].ring_schema[0].leave_message" class="regular-radio big-radio" id='ivr_message_allo'><label for="ivr_message_allo"></label>
                                                <label for="ivr_message_allo">Allow the user to leave a message for the Phone Agent</label>
                                            </div>
                                            <div class="col-sm-10" >
                                                <input type="radio" value="false" name="ivr_message" ng-model="ivr.pressed_operation[0].ring_schema[0].leave_message" class="regular-radio big-radio" id='ivr_message_dropdow'><label for="ivr_message_dropdow"></label>
                                                <label for="ivr_message_dropdow">Select From Dropdown</label>
                                            </div>
                                            <div class="col-sm-5 col-sm-offset-1 backgrndGrey" ng-show="ivr.pressed_operation[0].ring_schema[0].leave_message == 'false'">
                                                <select class="ivr_select" name="ivr_promptOptions" ng-model="ivr.pressed_operation[0].ring_schema[0].pressed_action" ng-change="resetInitialCount(ivr.pressed_operation[0].ring_schema[0])">
                                                    <option value="">Select Extension Option</option>
                                                    <option ng-repeat="option in optionarr" ng-selected="option.value==ivr.pressed_operation[0].ring_schema[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                </select>
                                            </div>

                                            <div ng-if="ivr.pressed_operation[0].ring_schema[0].pressed_action == 'dial' || ivr.pressed_operation[0].ring_schema[0].pressed_action == 'reps'">
                                                <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                    <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[0].dial_to" phone-input>
                                                </div>
                                                <div class="paddingLR5p col-sm-10 backgrndGrey">
                                                    <div class="col-sm-7">
                                                        <input type="checkbox" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[0].is_next_dial" name="ivr_noanswer" class="regular-checkbox solid-blue" id='ivr_noanswer'><label for="ivr_noanswer"></label>

                                                        <label for="ivr_noanswer" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[0].wait_time" name="ivr_seconds" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                                    </div>
                                                    <div class="col-sm-5"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[1].dial_to" phone-input>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                    <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementExtDialCount()"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                </div>
                                                <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                    <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                </div>


                                                <div ng-repeat="n in []| range:extdialcount">
                                                    <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                        <div class="paddingLR5p col-sm-10 backgrndGrey">
                                                            <div class="col-sm-7" >
                                                                <input type="checkbox" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[$index + 1].is_next_dial" name="ivr_noanswer_{{$index}}" class="regular-checkbox solid-blue" id='ivr_noanswer_{{$index}}'><label for="ivr_noanswer_{{$index}}"></label>

                                                                <label for="ivr_noanswer_{{$index}}" class="greyColor">If no answer after </label> 
                                                                <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[$index + 1].wait_time" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                            </div>
                                                            <div class="col-sm-5">
                                                                <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[0].ring_schema[0].dial_schema[$index + 2].dial_to" phone-input>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                            <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementExtDialCount()"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                        </div>
                                                        <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                            <button type="button" class="btn btn-primary plus-btn redBack" ng-click="show[$index] = false;
                                                                    removeItem(ivr.pressed_operation[0].ring_schema[0].dial_schema, $index + 2);"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div ng-if="ivr.pressed_operation[0].ring_schema[0].pressed_action == 'prompt'">
                                                <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                    <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[0].ring_schema[0].prompt_schema[0].prompt_id">
                                                        <option value="">Select Prompt</option>
                                                        <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[0].ring_schema[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div ng-if="ivr.pressed_operation[0].ring_schema[0].pressed_action == 'queue'">
                                                <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                    <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[0].ring_schema[0].sendToQueue_schema[0].queue_id">
                                                        <option value="">Select Queue</option>
                                                        <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[0].ring_schema[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div ng-if="ivr.pressed_operation[0].ring_schema[0].pressed_action == 'extension'">
                                                <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                    <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[0].ring_schema[0].ring_schema[0].phone_agent_id">
                                                        <option value="">Select Phone agent</option>
                                                        <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[0].ring_schema[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div ng-repeat="n in []| range:maincount">
                            <span ng-init="c = $index"></span>
                            <div ng-init="main[$index] = true;" class="mm" ng-show="main[$index]">
                                <div class="input-group form-group col-md-10 pull-left mainIvr">
                                    <span class="input-group-addon borderRight">When</span>


                                    <div class="col-xs-3 paddingLR5p margin7p borderRight">
                                        <select class="ivr_select" name="ivr_option" ng-model="ivr.pressed_operation[$index + 1].pressed_option">
                                            <option value="">Select</option>
                                            <option value="nothing">If nothing is pressed</option>
                                            <option value="1">1 is pressed</option>
                                            <option value="2">2 is pressed</option>
                                            <option value="3">3 is pressed</option>
                                            <option value="4">4 is pressed</option>
                                            <option value="5">5 is pressed</option>
                                            <option value="6">6 is pressed</option>
                                            <option value="7">7 is pressed</option>
                                            <option value="8">8 is pressed</option>
                                            <option value="9">9 is pressed</option>
                                            <option value="#"># is pressed</option>
                                            <option value="*">* is pressed</option>
                                        </select>
                                    </div>
                                    <div class="col-xs-5 paddingLR5p margin7p borderRight">
                                        <select class="ivr_select" name="ivr_method" ng-model="ivr.pressed_operation[$index + 1].pressed_action" ng-init="mustu=ivr.pressed_operation[$index + 1].pressed_action" ng-change="resetCount(c+1,ivr.pressed_operation[$index + 1])"> 
                                            <option value="">Select</option>
                                            <option ng-repeat="option in optionarr" ng-selected="option.value==mustu" value="{{option.value}}">{{option.display}}</option>
                                        </select>
                                    </div>
                                    <div class="col-xs-4 paddingLR5p margin7p">
                                        <span ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'dial' || ivr.pressed_operation[$index + 1].pressed_action == 'reps'">
                                            <input type="text" class="margin2p ivr_select backWhite" name="phonenumber" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[$index + 1].dial_schema[0].dial_to" phone-input>
                                        </span>

                                        <span ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'prompt'">
                                            <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].prompt_id">
                                                <option value="">Select Prompt</option>
                                                <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[c + 1].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                            </select>
                                        </span>
                                        <span ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'queue'">
                                            <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].queue_id">
                                                <option value="">Select Queue</option>
                                               <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[c + 1].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                            </select>
                                        </span>

                                        <span ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'extension'">
                                            <select name="ivr_pa" class="ivr_select" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].phone_agent_id">
                                                <option value="">Select Phone Agent</option>
                                                <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[c + 1].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                            </select>
                                        </span>

                                    </div>

                                </div>
                                <div class="col-sm-1 dial-plus paddingLR5p">
                                    <button type="button" ng-click="incrementMainCount()" class="plus-btn btn btn-primary greenBack"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                </div>
                                <div class="col-sm-1 dial-plus paddingLR5p">
                                    <button type="button" ng-click="main[$index] = false;" class="plus-btn btn btn-primary redBack"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                </div>


                                <div>

                                    <div class="form-group" ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'dial' || ivr.pressed_operation[$index + 1].pressed_action == 'reps'">

                                        <div class="col-sm-9 backgrndGrey" ng-init="(update)?'':initDialCount(c)">
                                            <div class="col-sm-8 paddingLR5p">
                                                <input type="checkbox" name="ivr_noanswer[c]" ng-model="ivr.pressed_operation[c + 1].dial_schema[0].is_next_dial" class="regular-checkbox solid-blue" id='ivr_noanswer[c]'><label for="ivr_noanswer[c]"></label>

                                                <label for="ivr_noanswer[c]" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" ng-model="ivr.pressed_operation[c + 1].dial_schema[0].wait_time" name="ivr_seconds" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                            </div>
                                            <div class="col-sm-4 paddingLR5p"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[c + 1].dial_schema[1].dial_to" phone-input>
                                            </div>
                                        </div>
                                        <div class="col-sm-1 dial-plus paddingLR5p">
                                            <button type="button" ng-click="incrementOtherDialCount(c)" class="btn btn-primary plus-btn greenBack"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                        </div>
                                        <div class="col-sm-1 dial-plus paddingLR5p">
                                            <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                        </div>


                                        <div ng-repeat="n in []| range:dialc[c]">
                                            <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                <div class="col-sm-9 backgrndGrey">
                                                    <div class="col-sm-8 paddingLR5p" >
                                                        <input type="checkbox" name="ivr_noanswer_{{$index}}" ng-model="ivr.pressed_operation[c + 1].dial_schema[$index + 1].is_next_dial" class="regular-checkbox solid-blue" id='ivr_noanswer_{{$index}}'><label for="ivr_noanswer_{{$index}}"></label>

                                                        <label for="ivr_noanswer_{{$index}}" class="greyColor">If no answer after </label> 
                                                        <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" ng-model="ivr.pressed_operation[c + 1].dial_schema[$index + 1].wait_time" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                    </div>
                                                    <div class="col-sm-4 paddingLR5p">
                                                        <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[c + 1].dial_schema[$index + 2].dial_to" phone-input>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 dial-plus paddingLR5p">
                                                    <button type="button" ng-click="incrementOtherDialCount(c)" class="btn btn-primary plus-btn greenBack"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                </div>
                                                <div class="col-sm-1 dial-plus paddingLR5p">
                                                    <button type="button"  ng-click="show[$index] = false;
                                                                removeItem(ivr.pressed_operation[$index + 1].dial_schema, $index + 2)" class="btn btn-primary plus-btn redBack"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'prompt'">
                                        <div class="paddingLR5p col-sm-8">
                                            <div class="input-group form-group col-md-12 backgrndGrey queue">
                                                <span class="input-group-addon borderRight" style="background:none;"> Then </span>
                                                <div class="paddingLR5p col-xs-6 margin7p">
                                                    <select class="ivr_select" name="ivr_queueOptions" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action" ng-change="resetCount(c+1,ivr.pressed_operation[c + 1].prompt_schema[0])">
                                                        <option value="">Select</option>
                                                        <option ng-repeat="option in optionarr" ng-selected="option.value == ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                    </select>
                                                </div>
                                                <div class="col-xs-6 paddingLR5p margin7p">
                                                    <span ng-if="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'dial' || ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'reps'">
                                                        <input type="text" class="margin2p ivr_select backWhite" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[0].dial_to" name="phonenumber" placeholder="Enter Phone Number" phone-input>
                                                    </span>

                                                    <span ng-if="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'prompt'">
                                                        <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].prompt_schema[0].prompt_id">
                                                            <option value="">Select Prompt</option>
                                                            <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[c + 1].prompt_schema[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                                        </select>
                                                    </span>
                                                    <span ng-if="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'queue'">
                                                        <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].sendToQueue_schema[0].queue_id">
                                                            <option value="">Select Queue</option>
                                                            <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[c + 1].prompt_schema[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                                        </select>
                                                    </span>
                                                    <span ng-if="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'extension'">
                                                        <select name="ivr_pa" class="ivr_select" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].ring_schema[0].phone_agent_id">
                                                            <option value="">Select Phone Agent</option>
                                                            <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[c + 1].prompt_schema[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                                        </select>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'dial' || ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'reps'">
                                            <div class="paddingLR5p col-sm-9 backgrndGrey" ng-init="(update)?'':initPromptDialCount(c)">
                                                <div class="col-sm-7">
                                                    <input type="checkbox" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[0].is_next_dial" name="ivr_noanswerspw" class="regular-checkbox solid-blue" id='ivr_noanswerspw'><label for="ivr_noanswerspw"></label>

                                                    <label for="ivr_noanswerspw" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" name="ivr_seconds" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[0].wait_time" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                                </div>
                                                <div class="col-sm-5"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[1].dial_to" phone-input>
                                                </div>
                                            </div>
                                            <div class="col-sm-1 dial-plus">
                                                <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementOtherPromptDialCount(c)"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                            </div>
                                            <div class="col-sm-1 dial-plus">
                                                <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                            </div>


                                            <div ng-repeat="n in []| range:promptdialc[c]">
                                                <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                    <div class="paddingLR5p col-sm-9 backgrndGrey">
                                                        <div class="col-sm-8" >
                                                            <input type="checkbox" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[$index + 1].is_next_dial" name="ivr_noanswerspr_{{$index}}" class="regular-checkbox solid-blue" id='ivr_noanswerspr_{{$index}}'><label for="ivr_noanswerspr_{{$index}}"></label>

                                                            <label for="ivr_noanswerspr_{{$index}}" class="greyColor">If no answer after </label> 
                                                            <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[$index + 1].wait_time" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema[$index + 2].dial_to" phone-input>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 dial-plus">
                                                        <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementOtherPromptDialCount(c)"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                    </div>
                                                    <div class="col-sm-1 dial-plus">
                                                        <button type="button" class="btn btn-primary plus-btn redBack" ng-click="show[$index] = false;
                                                                    removeItem(ivr.pressed_operation[c + 1].prompt_schema[0].dial_schema, $index + 2)"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--                                <div class="form-group" ng-if="ivr.prompt_option == 'queue'">
                                                                            <div class="col-sm-offset-1 col-sm-9 backgrndGrey">
                                                                                <select class="ivr_select" name="ivr_queue" ng-model="ivr.queue_queue">
                                                                                    <option value="">Select Queue</option>
                                                                                    <option value="1">Queue 1</option>
                                                                                    <option value="2">Queue 2</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>-->
                                        <div class="form-group" ng-if="ivr.pressed_operation[c + 1].prompt_schema[0].pressed_action == 'extension'">
                                            <!--                                            <div class="col-sm-9">
                                                                                            <input type="checkbox" name="ivr_noanswerExt" ng-model="ivr.ext_checkbox" class="regular-checkbox solid-blue" id='ivr_noanswerExt'><label for="ivr_noanswerExt"></label>
                                                                                            <label for="ivr_noanswerExt">If no answer after </label><input type="text" class="dialInputSec" name="ivr_seconds" ng-model="ivr.ext_seconds" placeholder="Seconds"> seconds.
                                                                                            <div ng-show="ivr.ext_checkbox">
                                                                                                <div class="col-sm-10" >
                                                                                                    <input type="radio" value="message" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_allow'><label for="ivr_message_allow"></label>
                                                                                                    <label for="ivr_message">Allow the user to leave a message for the Phone Agent</label>
                                                                                                </div>
                                                                                                <div class="col-sm-10" >
                                                                                                    <input type="radio" value="dropdown" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_dropdown'><label for="ivr_message_dropdown"></label>
                                                                                                    <label for="ivr_message">Select From Dropdown</label>
                                                                                                </div>
                                                                                                <div class="col-sm-5 col-sm-offset-1 backgrndGrey" ng-show="ivr.ext_radio == 'dropdown'">
                                                                                                    <select class="ivr_select" name="ivr_promptOptions" ng-model="ivr.ext_option">
                                                                                                        <option value="">Select Prompt Option</option>
                                                                                                        <option ng-repeat="option in optionarr" ng-show="option.value != ivr.prompt_option" value="{{option.value}}">{{option.display}}</option>
                                                                                                    </select>
                                                                                                </div>
                                            
                                                                                            </div>
                                                                                        </div>-->
                                        </div>

                                    </div>
                                    <div class="form-group" ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'queue'">
                                        <div class="paddingLR5p col-sm-10">
                                            <div class="input-group form-group col-md-12 backgrndGrey queue">
                                                <span class="input-group-addon" style="background:none;">
                                                    <input type="checkbox" name="ivr_queue[]" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].is_next_action" class="regular-checkbox solid-blue" id='ivr_queue[{{c}}]'><label for="ivr_queue[{{c}}]"></label>
                                                    If no agents are available or if no answer after <input type="text" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].wait_time" class="ivr_select backWhite dialInputSec" name="ivr_seconds" ng-model="ivr.data[c + 1].optionData.seconds" placeholder="Seconds"> seconds, then, </span>
                                                <div class="col-xs-12 margin7p">
                                                    <select class="ivr_select" name="ivr_queueOptions" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action" ng-change="resetCount(c+1,ivr.pressed_operation[c + 1].sendToQueue_schema[0])">
                                                        <option value="">Select</option>
                                                        <option ng-repeat="option in optionarr" ng-selected="option.value==ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action == 'dial' || ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action == 'reps'">
                                            <div class="col-sm-5 backgrndGrey">
                                                <input type="text" class="ivr_select backWhite" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[0].dial_to" name="phonenumber" placeholder="Enter Phone Number" phone-input>
                                            </div>
                                            <div class="col-sm-9 backgrndGrey" ng-init="(update)?'':initQueueDialCount(c)">
                                                <div class="col-sm-7">
                                                    <input type="checkbox" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[0].is_next_dial" name="ivr_noanswerqw_{{c}}" class="regular-checkbox solid-blue" id='ivr_noanswerqw_{{$index}}'><label for="ivr_noanswerqw_{{$index}}"></label>

                                                    <label for="ivr_noanswerqw_{{$index}}" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" name="ivr_seconds" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[0].wait_time" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                                </div>
                                                <div class="col-sm-5"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[1].dial_to" phone-input>
                                                </div>
                                            </div>
                                            <div class="col-sm-1 dial-plus">
                                                <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementOtherQueueDialCount(c)"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                            </div>
                                            <div class="col-sm-1 dial-plus">
                                                <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                            </div>


                                            <div ng-repeat="n in []| range:queuedialc[c]">
                                                <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                    <div class="col-sm-9 backgrndGrey">
                                                        <div class="col-sm-8" >
                                                            <input type="checkbox" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[$index + 1].is_next_dial" name="ivr_noanswerqe_{{$index}}" class="regular-checkbox solid-blue" id='ivr_noanswerqe_{{$index}}'><label for="ivr_noanswerqe_{{$index}}"></label>

                                                            <label for="ivr_noanswerqe_{{$index}}" class="greyColor">If no answer after </label> 
                                                            <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[$index + 1].wait_time" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema[$index + 2].dial_to" phone-input>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 dial-plus">
                                                        <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementOtherQueueDialCount(c)"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                    </div>
                                                    <div class="col-sm-1 dial-plus">
                                                        <button type="button" class="btn btn-primary plus-btn redBack" ng-click="show[$index] = false;
                                                                    removeItem(ivr.pressed_operation[c + 1].sendToQueue_schema[0].dial_schema, $index + 2)"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action == 'prompt'">
                                            <div class="col-sm-5 backgrndGrey">
                                                <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].prompt_schema[0].prompt_id">
                                                    <option value="">Select Prompt</option>
                                                    <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[c + 1].sendToQueue_schema[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action == 'queue'">
                                            <div class="col-sm-5 backgrndGrey">
                                                <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].sendToQueue_schema[0].queue_id">
                                                    <option value="">Select Queue</option>
                                                    <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[c + 1].sendToQueue_schema[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-if="ivr.pressed_operation[c + 1].sendToQueue_schema[0].pressed_action == 'extension'">
                                            <div class="col-sm-5 backgrndGrey">
                                                <select name="ivr_pa" class="ivr_select" ng-model="ivr.pressed_operation[c + 1].sendToQueue_schema[0].ring_schema[0].phone_agent_id">
                                                    <option value="">Select Phone Agent</option>
                                                    <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[c + 1].sendToQueue_schema[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                                </select>
                                            </div>
                                            <!--                                            <div class="col-sm-9">
                                                                                            <input type="checkbox" name="ivr_noanswerExt" ng-model="ivr.ext_checkbox" class="regular-checkbox solid-blue" id='ivr_noanswerExt'><label for="ivr_noanswerExt"></label>
                                                                                            <label for="ivr_noanswerExt">If no answer after </label><input type="text" class="dialInputSec" name="ivr_seconds" ng-model="ivr.ext_seconds" placeholder="Seconds"> seconds.
                                                                                            <div ng-show="ivr.ext_checkbox">
                                                                                                <div class="col-sm-10" >
                                                                                                    <input type="radio" value="message" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_allow'><label for="ivr_message_allow"></label>
                                                                                                    <label for="ivr_message">Allow the user to leave a message for the Phone Agent</label>
                                                                                                </div>
                                                                                                <div class="col-sm-10" >
                                                                                                    <input type="radio" value="dropdown" name="ivr_message" ng-model="ivr.ext_radio" class="regular-radio big-radio" id='ivr_message_dropdown'><label for="ivr_message_dropdown"></label>
                                                                                                    <label for="ivr_message">Select From Dropdown</label>
                                                                                                </div>
                                                                                                <div class="col-sm-5 col-sm-offset-1 backgrndGrey" ng-show="ivr.ext_radio == 'dropdown'">
                                                                                                    <select class="ivr_select" name="ivr_promptOptions" ng-model="ivr.ext_option">
                                                                                                        <option value="">Select Prompt Option</option>
                                                                                                        <option ng-repeat="option in optionarr" ng-show="option.value != ivr.pressed_operation[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                                                                    </select>
                                                                                                </div>
                                            
                                                                                            </div>
                                                                                        </div>-->
                                        </div>

                                    </div>

                                    <div class="form-group" ng-if="ivr.pressed_operation[$index + 1].pressed_action == 'extension'">
                                        <div class="col-sm-10">
                                            <input type="checkbox" name="ivr_noanswerExts[]" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].is_next_action" class="regular-checkbox solid-blue" id='ivr_noanswerExts[{{c}}]'><label for="ivr_noanswerExts[{{c}}]"></label>
                                            <label for="ivr_noanswerExts[{{c}}]">If no answer after </label><input type="text" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].wait_time" class="dialInputSec" name="ivr_seconds" placeholder="Seconds"> seconds.
                                            <div ng-show="ivr.pressed_operation[c + 1].ring_schema[0].is_next_action">
                                                <div class="col-sm-10" >
                                                    <input type="radio" value="true" name="ivr_message_{{c}}" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].leave_message" class="regular-radio big-radio" id='ivr_message_allow_{{c}}'><label for="ivr_message_allow_{{c}}"></label>
                                                    <label for="ivr_message_allow_{{c}}">Allow the user to leave a message for the Phone Agent</label>
                                                </div>
                                                <div class="col-sm-10" >
                                                    <input type="radio" value="false" name="ivr_message_{{c}}" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].leave_message" class="regular-radio big-radio" id='ivr_message_dropdown_{{c}}'><label for="ivr_message_dropdown_{{c}}"></label>
                                                    <label for="ivr_message_dropdown_{{c}}">Select From Dropdown</label>
                                                </div>
                                                <div class="col-sm-5 col-sm-offset-1 backgrndGrey" ng-show="ivr.pressed_operation[c + 1].ring_schema[0].leave_message == 'false'">
                                                    <select class="ivr_select" name="ivr_promptOptions" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].pressed_action" ng-change="resetCount(c+1,ivr.pressed_operation[c + 1].ring_schema[0])">
                                                        <option value="">Select Extension Option</option>
                                                        <option ng-repeat="option in optionarr" ng-selected="option.value == ivr.pressed_operation[c + 1].ring_schema[0].pressed_action" value="{{option.value}}">{{option.display}}</option>
                                                    </select>
                                                </div>
                                                <div ng-if="ivr.pressed_operation[c + 1].ring_schema[0].pressed_action == 'dial' || ivr.pressed_operation[c + 1].ring_schema[0].pressed_action == 'reps'">
                                                    <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                        <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[0].dial_to" phone-input>
                                                    </div>
                                                    <div class="paddingLR5p col-sm-10 backgrndGrey" ng-init="(update)?'':initExtDialCount(c)">
                                                        <div class="col-sm-7">
                                                            <input type="checkbox" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[0].is_next_dial" name="ivr_noanswerrw" class="regular-checkbox solid-blue" id='ivr_noanswerrw'><label for="ivr_noanswerrw"></label>

                                                            <label for="ivr_noanswerrw" class="greyColor">If no answer after </label> <input type="text" class="borderRight borderLeft ivr_select backWhite dialInputSec" name="ivr_seconds" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[0].wait_time" placeholder="Seconds"> <span class="greyColor">seconds, then ring </span>
                                                        </div>
                                                        <div class="col-sm-5"><input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno" placeholder="Enter Phone Number" style="display:inline;" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[1].dial_to" phone-input>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                        <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementOtherExtDialCount(c)"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                    </div>
                                                    <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                        <button type="button" class="btn btn-primary plus-btn redBack" style="cursor: not-allowed;"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                    </div>

                                                    <div ng-repeat="n in []| range:extdialc[c]">
                                                        <div ng-init="show[$index] = true;" ng-show="show[$index]">
                                                            <div class="paddingLR5p col-sm-10 backgrndGrey">
                                                                <div class="col-sm-7" >
                                                                    <input type="checkbox" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[$index + 1].is_next_dial" name="ivr_noanswerre_{{$index}}" class="regular-checkbox solid-blue" id='ivr_noanswerre_{{$index}}'><label for="ivr_noanswerre_{{$index}}"></label>

                                                                    <label for="ivr_noanswerre_{{$index}}" class="greyColor">If no answer after </label> 
                                                                    <input type="text" class="borderLeft borderRight ivr_select backWhite dialInputSec" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[$index + 1].wait_time" ng-pattern="/^[0-9+-]*$/" name="ivr_seconds_{{$index}}" placeholder="Seconds" ><span class="greyColor"> seconds, then ring </span>
                                                                </div>
                                                                <div class="col-sm-5">
                                                                    <input type="text" class="borderLeft ivr_select backWhite" name="ivr_phoneno_{{$index}}" placeholder="Enter Phone Number" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].dial_schema[$index + 2].dial_to" phone-input>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                                <button type="button" class="btn btn-primary plus-btn greenBack" ng-click="incrementOtherExtDialCount(c)"> <span><i class="glyphicon glyphicon-plus"></i></span> </button>
                                                            </div>
                                                            <div class="col-sm-1 dial-plus" style="margin:0 9px;">
                                                                <button type="button" class="btn btn-primary plus-btn redBack" ng-click="show[$index] = false;
                                                                            removeItem(ivr.pressed_operation[c + 1].ring_schema[0].dial_schema, $index + 2)"> <span><i class="glyphicon glyphicon-minus"></i></span> </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-if="ivr.pressed_operation[c + 1].ring_schema[0].pressed_action == 'prompt'">
                                                    <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                        <select class="ivr_select" name="ivr_prompts" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].prompt_schema[0].prompt_id">
                                                            <option value="">Select Prompt</option>
                                                            <option ng-repeat="prompt in prompts" ng-selected="prompt._id==ivr.pressed_operation[c + 1].ring_schema[0].prompt_schema[0].prompt_id" value="{{prompt._id}}">{{prompt.name}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div ng-if="ivr.pressed_operation[c + 1].ring_schema[0].pressed_action == 'queue'">
                                                    <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                        <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].sendToQueue_schema[0].queue_id">
                                                            <option value="">Select Queue</option>
                                                            <option ng-repeat="queue in queues" ng-selected="queue._id==ivr.pressed_operation[c + 1].ring_schema[0].sendToQueue_schema[0].queue_id" value="{{queue._id}}">{{queue.queue_name}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div ng-if="ivr.pressed_operation[c + 1].ring_schema[0].pressed_action == 'extension'">
                                                    <div class="col-sm-5 backgrndGrey" style="margin-left: 5px;">
                                                        <select class="ivr_select" name="ivr_queue" ng-model="ivr.pressed_operation[c + 1].ring_schema[0].ring_schema[0].phone_agent_id">
                                                            <option value="">Select Phone Agent</option>
                                                            <option ng-repeat="pa in pas" ng-selected="pa._id==ivr.pressed_operation[c + 1].ring_schema[0].ring_schema[0].phone_agent_id" value="{{pa._id}}">{{pa.first_name}} {{pa.last_name}}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                        <div class="col-sm-12 mrgtp30 paddingLR5p">
                            <div class="input-group form-group col-md-6 pull-left mainIvr">
                                <span class="input-group-addon borderRight">Name this IVR</span>


                                <div class="paddingLR5p col-xs-12 margin7p ">
                                    <input type="text" ng-model="ivr.ivr_name" placeholder="Enter IVR Name" name="ivr_name" class=" ivr_select backWhite ng-pristine ng-valid">
                                </div>
                            </div> 
                        </div>
                        <div class="form-group">
                            <div class="col-sm-10">
                                <input type="submit" value="Submit" class="btn btn-primary">
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- Call Routing IVR BASED View Form -->

<style>
    .mm {
        border-top: 1px solid #e0e0e0;
        display: inline-block;
        padding-top: 10px;
        width: 100%;
    }
</style>
