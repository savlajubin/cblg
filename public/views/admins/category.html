<div ng-show="showListCategory" class="animate-repeat col-sm-12" >
    <section class="content-header">
        <h1>
            Category List
        </h1>
        <!--              <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                        <li><a href="#">Verticals</a></li>
                        <li class="active">List</li>
                      </ol>-->
    </section>
    <section class="content">
        <div class="box box-primary">
            <div class="box-header">

                <h3 class="box-title"></h3>

                <div class="box-tools">
                    <button class="btn btn-primary btn-flat pull-right" ng-click='getAddCategoryForm();'>Add</button>
                    <div class="input-group input-group-sm pull-left tableSearchBox">
                        <input type="text" name="table_search" ng-model="query" ng-change="tableParams.filter(query)" class="form-control pull-right" placeholder="Search">

                        <div class="input-group-btn">
                            <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                        </div>
                    </div>

                </div>
            </div>
            <div class="box-body" col-show-hide>
                <table class="table table-condensed" ng-table="tableParams" export-csv="csv">
                    <tbody>
                        <tr ng-class="$even? 'oddcolor' : 'evencolor'" ng-repeat="category in $data" ng-if= "dataPresent">
                            <td data-title="'#'"><span ng-if="params.page() ? true : false">{{params.page() > 1 ? ($index + 1 + ((params.page() - 1) * params.count())) : $index + 1}}</span></td>
                            <td ng-show="showCol[0]" sortable="'category_name'" data-title="'Category Name'" data-title-text="Category Name">
                                <a href="javascript:void(0)" data-html="true" data-title="{{category.category_description}}" data-placement="right" data-animation="am-flip-x" bs-tooltip>{{category.category_name}}</a>
                            </td>
                            <td ng-show="showCol[1]" sortable="'vertical_name'" data-title="'Vertical'" data-title-text="Vertical">{{category.vertical_id.vertical_name}}</td>
                            <td ng-show="showCol[2]" sortable="'category_status'" data-title="'Status'" data-title-text="Status" ng-click="statusCategory(category._id, category.category_status);" class="actionBtn">
                                <span ng-if="category.category_status" title="Active" class="glyphicon text-success glyphicon-ok-sign"></span>
                                <span ng-if="!category.category_status" title="Deactive" class="glyphicon text-danger glyphicon-remove-sign"></span>
                            </td>
                            <td ng-show="showCol[3]" sortable="'created'" data-title="'Created'" data-title-text="Created">{{category.created| date:'medium'}}</td>
                            <td data-title="'Action'" data-title-text="Action">
                                <!--<span class="glyphicon glyphicon-eye-open actionBtn" data-title="Category Details" data-animation="am-fade-and-slide-top" content-template="/view"  bs-modal="modal" ng-click="categoryView(category._id)"></span>-->
                                <span data-title="Category Details" data-animation="am-fade-and-slide-top" ng-click="categoryView(category._id)" template-url="Preview.html"  bs-modal="modal" class="glyphicon glyphicon-eye-open actionBtn"></span>
                                <span class="glyphicon glyphicon-edit actionBtn" title="Edit" ng-click="getEditCategoryForm(category._id)"></span>
                                <span class="glyphicon glyphicon-trash actionBtn" title="Delete" ng-click="deleteCategory(category._id)"></span>
                            </td>
                            <td header="'headerSettingGear.html'" ></td>
                        </tr>
                        <tr ng-if="!dataPresent">
                            <td colspan="100" class="text-center noDataFoundTd">No Data Found</td>
                        </tr>
                    </tbody>
                </table>
                <div class="row pull-right downloadCsvLink">Download as <a href="javascript:void(0)" ng-click='hideDropDown();
                    csv.generate($event, "Categories" + currentDate + ".csv");'>CSV</a></div>
            </div>
        </div>
    </section>
</div>
<script type="text/ng-template" id="headerSettingGear.html">
    <div class="dropdown">
    <button class="btn" type="button" data-ng-click="toggleDropDown();">
    <span class="glyphicon glyphicon-cog "></span>&nbsp;<span class="caret"></span>
    </button>
    <ul class="dropdown-menu gearbox" data-ng-if="isTHdropdown">
    <li><a ng-click="showCol[0] = !showCol[0]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[0]]"></i> Category Name</a></li>
    <li><a ng-click="showCol[1] = !showCol[1]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[1]]"></i> Vertical</a></li>
    <li><a ng-click="showCol[2] = !showCol[2]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[2]]"></i> Status</a></li>
    <li><a ng-click="showCol[3] = !showCol[3]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[3]]"></i> Created</a></li>
    </ul>
    </div>
</script>
<!-- End list the category -->


<!-- start View the category -->
<script type="text/ng-template" id="Preview.html">
    <div class="modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header" ng-show="title">
    <button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" ng-bind="title"></h4>
    </div>
    <div class="modal-body">
    <table class="table table-striped">
    <tr><td><b>Category Name:</b></td><td>  {{categoryInfo.category_name}}</td></tr>
    <tr><td><b>Vertical:</b> </td><td>{{categoryInfo.vertical_id.vertical_name}}</td></tr>
    <tr><td><b>Description:</b> </td><td>{{categoryInfo.category_description}}</td></tr>
    <tr><td><b>Status:</b> </td><td>
    <span ng-show="categoryInfo.category_status==true" class="label label-success">Active</span>
    <span ng-show="categoryInfo.category_status==false" class="label label-danger">Deactive</span>
    </td></tr>
    <tr><td><b>Created:</b> </td><td>{{categoryInfo.created| date:'medium'}}</td></tr>
    <tr><td><b>Modified:</b> </td><td>{{categoryInfo.modified| date:'medium'}}</td></tr>
    </table>

    </div>
    <div class="modal-footer">
    <button type="button" class="btn btn-primary btn-flat" ng-click="$hide()">Close</button>
    </div>
    </div>
    </div>
    </div>

</script>
<!-- end View the category -->


<!-- start add the category -->
<div ng-show="showAddCategory" class="col-sm-8 col-sm-offset-2">
    <section class="content-header">
        <h1>
            Add Category
        </h1>
        <!--              <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                        <li><a href="#">Verticals</a></li>
                        <li class="active">List</li>
                      </ol>-->
    </section>
    <section class="content">
        <div class="box box-primary">
            <div class="box-header">
                <!--<h3>Add Category</h3>-->
            </div>
            <div class="box-body">
                <!--<div class="row">-->
                <!--<div class="col-sm-8 col-md-6 col-md-offset-1">-->
                <div ng-show="error" class="alert alert-danger">{{error}}</div>
                <div ng-show="success" class="alert alert-success">{{success}}</div>
                <form  name="category_form" category="form" ng-submit="createCategory(category);">
                    <div class="col-sm-8 col-sm-offset-2">
                        <div class="form-group">
                            <!--<span class="input-group-addon"><i class="glyphicon glyphicon-category"></i></span>-->
                            <input class="form-control" required type="text" name='name' ng-model="category.name" placeholder="Category name" tabindex="1"/>
                            <span class = "text-danger" ng-show="category_form.name.$dirty && category_form.name.$error.required" >Category Name is required</span>
                        </div>
                        <div class="form-group">
                            <!--<span class="input-group-addon"><i class="glyphicon glyphicon-category"></i></span>-->
                            <textarea class="form-control" required name='description' ng-model="category.description" placeholder="Category description" tabindex="2"></textarea>
                            <span class = "text-danger" ng-show="category_form.description.$dirty && category_form.description.$error.required" >Category Description is required</span>
                        </div>
                        <div class="form-group" >
                            <select type="text" required name="status" id="status" class="form-control" placeholder="Status" ng-model="category.status" tabindex="3">
                                <option value="">Select</option>
                                <option value="true">Active</option>
                                <option value="false">Deactive</option>
                            </select>
                        </div>
                        <div class="form-group" >
                            <select type="text" required name="vertical" id="vertical" class="form-control" placeholder="Select Vertical" ng-model="category.vertical_id" tabindex="4">
                                <option value="">Select</option>
                                <option ng-repeat="vertical in verticalList" value="{{vertical._id}}">{{vertical.vertical_name}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-6 padL0">
                                <button type="button" class="btn  btn-primary btn-block btn-flat" ng-click="back();">Cancel</button>
                            </div>
                            <div class="col-sm-6 padR0">
                                <button type="submit" class="btn  btn-primary btn-block btn-flat" ng-disabled="category_form.$invalid">Add</button>
                            </div>
                        </div>
                    </div>
                </form>
                <!--</div>-->
                <!--</div>-->
            </div>
        </div>
    </section>
</div>
<!-- End Add the category -->


<!-- start edit the category -->
<div ng-show="showEditCategory" class="col-sm-8 col-sm-offset-2">
    <section class="content-header">
        <h1>
            Edit Category
        </h1>
        <!--              <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                        <li><a href="#">Verticals</a></li>
                        <li class="active">List</li>
                      </ol>-->
    </section>
    <section class="content">
        <div class="box box-primary">
            <div class="box-header">
                <!--<h3>Edit Category</h3>-->
            </div>
            <div class="box-body">
                <!--<div class="row">-->
                <!--<div class="col-sm-8 col-md-6 col-md-offset-3">-->
                <div ng-show="error" class="alert alert-danger">{{error}}</div>
                <div ng-show="success" class="alert alert-success">{{success}}</div>
                <form name="edit_cat" category="form" ng-submit="editCategory(category);">
                    <div class="col-sm-8 col-sm-offset-2">
                        <input type="hidden" name='name' ng-model="category._id" />
                        <div class="form-group">
                            <!--<span class="input-group-addon"><i class="glyphicon glyphicon-category"></i></span>-->
                            <input class="form-control" required type="text" name='name' ng-model="category.name" placeholder="Category name" tabindex="1"/>
                            <span class = "text-danger" ng-show="edit_cat.name.$dirty && edit_cat.name.$error.required" >Category Name is required</span>

                        </div>
                        <div class="form-group">
                            <!--<span class="input-group-addon"><i class="glyphicon glyphicon-category"></i></span>-->
                            <textarea class="form-control" required name='description' ng-model="category.description" placeholder="Category description" tabindex="2"></textarea>
                            <span class = "text-danger" ng-show="edit_cat.description.$dirty && edit_cat.description.$error.required">Category Description is required</span>
                        </div>
                        <div class="form-group" >
                            <select type="text" required name="status" id="status" class="form-control input-lg" placeholder="Status" ng-model="category.status" tabindex="3">
                                <option value="">Select</option>
                                <option value="true" ng-selected="category.status == true">Active</option>
                                <option value="false" ng-selected="category.status == false">Deactive</option>
                            </select>
                        </div>
                        <div class="form-group" >
                            <select type="text" required name="status" id="status" class="form-control input-lg" placeholder="Select Vertical" ng-model="category.vertical_id" tabindex="4" >
                                <option value="">Select</option>
                                <option ng-repeat="vertical in verticalList" value="{{vertical._id}}" ng-selected="vertical._id == category.vertical_id">{{vertical.vertical_name}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-6 padL0">
                                <button type="button" class="btn  btn-primary btn-block btn-flat" ng-click="back();" value="Cancel" >Cancel</button>
                            </div>
                            <div class="col-sm-6 padR0">
                                <button type="submit" class="btn  btn-primary btn-block btn-flat" ng-disabled="edit_cat.$invalid">Edit</button>
                            </div>
                        </div>
                    </div>
                </form>
                <!--</div>-->
                <!--</div>-->
            </div>
        </div>
    </section>
</div>
<!-- End edit the category -->