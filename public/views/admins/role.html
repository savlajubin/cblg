<!-- start lsit the role -->
<div ng-show="showListRole" class="animate-repeat col-sm-12">
    <section class="content-header">
        <h1>
            Role List
        </h1>
        <!--              <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                        <li><a href="#">Verticals</a></li>
                        <li class="active">List</li>
                      </ol>-->
    </section>
    <section class="content">

        <div class="box box-primary">
            <div class="box-header">
                <h3 class="box-title"></h3>

                <div class="box-tools">
                    <!--<button class="btn btn-primary pull-right" ng-click='getAddCategoryForm();'>Add</button>-->
                    <div class="input-group input-group-sm pull-left tableSearchBox">
                        <input type="text" name="table_search" ng-model="query" ng-change="tableParams.filter(query)" class="form-control pull-right" placeholder="Search">

                        <div class="input-group-btn">
                            <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                        </div>
                    </div>

                </div>
            </div>
            <div class="box-body" col-show-hide>
                <table class="table table-condensed" ng-table="tableParams" export-csv="csv">
                    <tbody>
                        <tr ng-class="$even? 'oddcolor' : 'evencolor'" ng-repeat="role in $data" ng-if= "dataPresent">
                            <td data-title="'#'"><span ng-if="params.page() ? true : false">{{params.page() > 1 ? ($index + 1 + ((params.page() - 1) * params.count())) : $index + 1}}</span></td>
                            <td ng-show="showCol[0]" sortable="'type'" data-title="'Role Name'" data-title-text="Role Name">{{role.type}}</td>
                            <td ng-show="showCol[1]" sortable="'code'" data-title="'Code'" data-title-text="Code">{{role.code}}</td>
                            <td ng-show="showCol[2]" sortable="'status'" data-title="'Status'" data-title-text="Status" ng-click="statusRole(role._id, role.status);" class="actionBtn">
                                <span ng-if="role.status == 'active'" title="Active" class="glyphicon text-success glyphicon-ok-sign"></span>
                                <span ng-if="role.status == 'deactive'" title="Deactive" class="glyphicon text-danger glyphicon-remove-sign"></span>
                            </td>
                            <td ng-show="showCol[3]" sortable="'created'" data-title="'Created'" data-title-text="Created">{{role.created| date:'medium'}}</td>
                            <td data-title="'Action'" data-title-text="Action">
                                <span data-title="Role Details" data-animation="am-fade-and-slide-top" ng-click="roleView(role._id)" template-url="View.html"  bs-modal="modal" class="glyphicon glyphicon-eye-open actionBtn"></span>
                            </td>
                            <td header="'headerSettingGear.html'" ></td>
                        </tr>
                        <tr ng-if="!dataPresent">
                            <td colspan="100" class="text-center noDataFoundTd">No Data Found</td>
                        </tr>
                    </tbody>
                </table>
                <div class="row pull-right downloadCsvLink">Download as <a href="javascript:void(0)" ng-click='hideDropDown();
                    csv.generate($event, "Roles" + currentDate + ".csv");'>CSV</a></div>
            </div>
        </div>
    </section>
</div>
<script type="text/ng-template" id="headerSettingGear.html">
    <div class="dropdown">
    <button class="btn" type="button" data-ng-click="toggleDropDown();">
    <span class="glyphicon glyphicon-cog "></span>&nbsp;<span class="caret"></span>
    </button>
    <ul class="dropdown-menu gearbox" data-ng-if="isTHdropdown">
    <li><a ng-click="showCol[0] = !showCol[0]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[0]]"></i> Role Name</a></li>
    <li><a ng-click="showCol[1] = !showCol[1]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[1]]"></i> Code</a></li>
    <li><a ng-click="showCol[2] = !showCol[2]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[2]]"></i> Status</a></li>
    <li><a ng-click="showCol[3] = !showCol[3]"><i class="fa" ng-class="{'true':'fa-eye-slash', 'false':'fa-eye'}[showCol[3]]"></i> Created</a></li>
    </ul>
    </div>
</script>
<!-- End list the role -->


<!-- start View the role -->
<script type="text/ng-template" id="View.html">
    <div class="modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header" ng-show="title">
    <button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" ng-bind="title"></h4>
    </div>
    <div class="modal-body">
    <table class="table table-striped">
    <tr><td><b>Role Name:</b></td><td>  {{roleInfo.type}}</td></tr>
    <tr><td><b>Role Code:</b> </td><td>{{roleInfo.code}}</td></tr>
    <tr><td><b>Status:</b></td><td>
    <span ng-show="roleInfo.status=='active'" class="label label-success">Active</span>
    <span ng-show="roleInfo.status=='deactive'" class="label label-danger">Deactive</span>
    </td></tr>
    </table>

    <!--<div ng-repeat="module in roleInfo.module_access">
    <div class="panel panel-default">
    <div class="panel-heading"><p><b>Module:</b>  {{module.module_id.module_name}}</p></div>
    <div class="panel-body">
    <table class="table table-striped">
    <tr><td><b>Description:</b></td><td>  {{module.module_id.description}}</td></tr>
    <tr><td><b>Status:</b></td><td>  {{module.module_id.status}}</td></tr>
    <tr><td><b>read:</b></td><td> {{module.read}}</td></tr>
    <tr><td><b>write:</b></td><td> {{module.write}}</td></tr>
    <tr><td><b>execute:</b></td><td> {{module.execute}}</td></tr>
    </table>
    </div>
    </div>
    </div>-->
    </div>
    <div class="modal-footer">
    <button type="button" class="btn btn-primary btn-flat" ng-click="$hide()">Close</button>
    </div>
    </div>
    </div>
    </div>
</script>
<!-- end View the role -->


<!-- start add the role -->
<div ng-show="showAddRole">
    <div class="panel panel-default">
        <div class="panel-heading"><h3>Add Role</h3></div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-8 col-md-6 col-md-offset-3">
                    <div ng-show="error" class="alert alert-danger">{{error}}</div>
                    <div ng-show="success" class="alert alert-success">{{success}}</div>
                    <form class="vertical-form" name="role_form" role="form" ng-submit="createRole(role);">
                        <div class="form-group">
                            <input class="form-control" required type="text" name='name' ng-model="role.name" placeholder="Role name" tabindex="1" />
                            <span class = "text-danger" ng-show="role_form.name.$dirty && role_form.name.$error.required" >Role Name is required</span>
                        </div>
                        <div class="form-group">
                            <input class="form-control" required type="text" name='code' ng-model="role.code" placeholder="Role Code" tabindex="2" />
                            <span class = "text-danger" ng-show="role_form.code.$dirty && role_form.code.$error.required" >Role Code is required</span>
                        </div>
                        <div class="form-group" >
                            <select type="text" required name="status" id="status" class="form-control input-lg" placeholder="Status" ng-model="role.status" tabindex="3" >
                                <option value="">Select</option>
                                <option value="active">Active</option>
                                <option value="deactive">Deactive</option>
                            </select>
                        </div>
                        <!--                        <div class="form-group table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Module</th>
                                                                <th>Access</th>
                                                                <th>Read</th>
                                                                <th>Write</th>
                                                                <th>Execute</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="module in moduleList">
                                                                <td>{{module.module_name}}</td>
                                                                <td><div><input type="checkbox" id="checkbox-{{$index + 1}}-1" name="module._id[]" class="regular-checkbox solid-blue" ng-model="role.module[$index].module_id" value="{{module._id}}" ng-true-value="{{module._id}}" /><label for="checkbox-{{$index + 1}}-1"></label></div></td>
                                                                <td><div><input type="checkbox" id="checkbox-{{$index + 1}}-2" name="read[]" class="regular-checkbox solid-blue" ng-model="role.module[$index].read" value="true" /><label for="checkbox-{{$index + 1}}-2"></label></div></td>
                                                                <td><div><input type="checkbox" id="checkbox-{{$index + 1}}-3" name="write[]" class="regular-checkbox solid-blue" ng-model="role.module[$index].write" value="true" /><label for="checkbox-{{$index + 1}}-3"></label></div></td>
                                                                <td><div><input type="checkbox" id="checkbox-{{$index + 1}}-4" name="execute[]" ng-model="role.module[$index].execute" value="true" class="regular-checkbox solid-blue" /><label for="checkbox-{{$index + 1}}-4"></label></div></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>-->
                        <div class="form-group">
                            <div class="col-sm-6">
                                <input type="button" class="btn  btn-primary btn-block" ng-click="back();" value="Back" >
                            </div>
                            <div class="col-sm-6">
                                <input type="submit" class="btn  btn-primary btn-block" ng-disabled="role_form.$invalid" value="Add" >
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Add the role -->


<!-- start edit the role -->
<div ng-show="showEditRole">
    <div class="panel panel-default">
        <div class="panel-heading"><h3>Edit Role</h3></div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-8 col-md-6 col-md-offset-3">
                    <div ng-show="error" class="alert alert-danger">{{error}}</div>
                    <div ng-show="success" class="alert alert-success">{{success}}</div>
                    <form class="vertical-form" name="edit_form" role="form" ng-submit="editRole(role);">
                        <input type="hidden" name='name' ng-model="role._id" />
                        <div class="form-group">
                            <input class="form-control" required type="text" name='name' ng-model="role.name" placeholder="Role name" tabindex="1" />
                            <span class = "text-danger" ng-show="edit_form.name.$dirty && edit_form.name.$error.required" >Role Name is required</span>
                        </div>
                        <div class="form-group">
                            <input class="form-control" required type="text" name='code' ng-model="role.code" placeholder="Role Code" tabindex="2" />
                            <span class = "text-danger" ng-show="edit_form.code.$dirty && edit_form.code.$error.required" >Role Code is required</span>
                        </div>
                        <div class="form-group" >
                            <select type="text" required name="status" id="status" class="form-control input-lg" placeholder="Status" ng-model="role.status" tabindex="3" >
                                <option value="">Select</option>
                                <option value="active" >Active</option>
                                <option value="deactive">Deactive</option>
                            </select>
                        </div>
                        <!--                        <div class="form-group table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Module</th>
                                                                <th>Access</th>
                                                                <th>Read</th>
                                                                <th>Write</th>
                                                                <th>Execute</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="module in moduleList">
                                                                <td>{{module.module_name}}</td>
                                                                <td><input type="checkbox" name="module._id[]" ng-model="role.module[$index].module_id" value="{{module._id}}" ng-true-value="{{module._id}}" ></td>
                                                                <td><input type="checkbox" name="read[]" ng-model="role.module[$index].read" value="true"></td>
                                                                <td><input type="checkbox" name="write[]" ng-model="role.module[$index].write" value="true"></td>
                                                                <td><input type="checkbox" name="execute[]" ng-model="role.module[$index].execute" value="true"></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>-->
                        <div class="form-group">
                            <div class="col-sm-6">
                                <input type="button" class="btn  btn-primary btn-block" ng-click="back();" value="Back" >
                            </div>
                            <div class="col-sm-6">
                                <input type="submit" class="btn  btn-primary btn-block" ng-disabled="edit_form.$invalid" value="Edit" >
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End edit the role -->
